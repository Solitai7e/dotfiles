set info size:atime
set hidden
set relativenumber
set watch
set drawbox
set tabstop 2
set icons
set incsearch
set shell bash.lf

map <esc> push :<space><enter>
map <backspace2> :up; toggle
map T &x-terminal-emulator
map S &x-terminal-emulator -e lf
map O push $touch<space>
map o push $mkdir<space>-p<space>
map e push &jump<space>

cmd delete %each delete <<< "$fx"
map x delete

cmd update-layout %{{
  if [ $(($lf_width)) -ge 180 ]; then
    lf -remote "send $id :set ratios 1:3:4; set preview"
  elif [ $(($lf_width)) -ge 110 ]; then
    lf -remote "send $id :set ratios 3:4; set preview"
  else
    lf -remote "send $id :set nopreview; set ratios 1"
  fi
}}
cmd update-title &printf "\033]0; %s - lf\007" "$PWD" > /dev/tty

cmd on-init :{{
  update-layout
  cmd on-redraw update-layout
  update-title
  cmd on-cd update-title
}}
